<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Konzertkalender</title>

  <!-- FullCalendar CSS -->
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.9/index.global.min.css" rel="stylesheet">

  <!-- FullCalendar JS -->
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.9/index.global.min.js"></script>

  <!-- PapaParse: CSV einlesen -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>

  <!-- Dein Stylesheet -->
  <link rel="stylesheet" href="Kneipenchor.css" />

  <style>
    #calendar {
      max-width: 1000px;
      margin: 2rem auto;
      background: white;
      padding: 1rem;
      border-radius: 1rem;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    .fc-toolbar-title {
      font-size: 1.6rem;
      font-weight: bold;
    }

    body {
      background: var(--bg-color);
    }
  </style>
</head>
<body>

<!-- HEADER -->
<header class="main-header">
  <button class="hamburger" aria-label="Men√º √∂ffnen" aria-expanded="false" type="button">
    <span class="bar"></span>
    <span class="bar"></span>
    <span class="bar"></span>
  </button>

  <h1 class="site-title">Kneipench√∂re vernetzt</h1>
  <nav class="main-nav">
    <ul class="nav-list">
      <li><a href="index.html" class="nav-link">Startseite</a></li>
      <li><a href="Karte.html" class="nav-link">Kneipenchor-Map</a></li>
      <li><a href="kalender.html" class="nav-link">Kalender</a></li>
      <li><a href="index.html#forum" class="nav-link">Forum</a></li>
      <li><a href="kalender.html" class="nav-link">Kalender</a></li>
    </ul>
    <a href="eintragen.html" class="register-btn">chor eintragen</a>
  </nav>
</header>

<!-- MAIN -->
<main>
  <section class="calendar-section">
    <h2 style="text-align: center;">üé∂ Konzertkalender der Kneipench√∂re</h2>
    <div id="calendar"></div>
  </section>
</main>

<!-- FOOTER -->
<footer class="main-footer">
  <div class="footer-brand">
    <h2 class="footer-title">Kneipench√∂re<br>vernetzt</h2>
  </div>
  <nav class="footer-nav">
    <div class="footer-sections">
      <section class="footer-section">
        <h3 class="section-title">Festival</h3>
        <p class="section-content">
          Hier gibt es alle Infos zum j√§hrlich statt findenden Kneipenchor-Festival:<br>
          <a href="https://karlsruherkneipenchor.de/festival/" target="_blank">www.karlsruherkneipenchor.de</a>
        </p>
      </section>
      <section class="footer-section">
        <h3 class="section-title">Kontakt</h3>
        <p class="section-content">
          Jimmy R√∂ck<br>
          c/o Kulturzentrum Tollhaus<br>
          Alter Schlachthof 35<br>
          76131 Karlsruhe<br>
          <a href="mailto:kontakt@kneipenchor.net">kontakt@kneipenchor.net</a>
        </p>
      </section>
      <section class="footer-section">
        <h3 class="section-title">Info</h3>
        <p class="section-content">
          √úber uns<br>
          Impressum<br>
          Datenschutz
        </p>
      </section>
    </div>
  </nav>
</footer>

<!-- Kalender-Skript -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const csvUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRkJDBs--vb6-T67ihZI5jkGclOu50Tsd5YtGvodoWXWEW34LR3TsJJ8nNj_PxsFxusXt5kq6uk_RTh/pub?output=csv';

    Papa.parse(csvUrl, {
      download: true,
      header: true,
      complete: function (results) {
        const events = results.data.map(row => ({
          title: `${row.Chor} ‚Äì ${row.Titel}`,
          start: row.Datum,
          extendedProps: {
            ort: row.Ort,
            uhrzeit: row.Uhrzeit,
            adresse: row.Adresse,
            link: row.Link,
            kommentar: row.Kommentar
          }
        }));

        const calendarEl = document.getElementById('calendar');
        const calendar = new FullCalendar.Calendar(calendarEl, {
          initialView: 'dayGridMonth',
          locale: 'de',
          headerToolbar: {
            left: 'prev,next today',
            center: 'title',
            right: 'dayGridMonth,listMonth'
          },
          events: events,
          eventClick: function (info) {
            const props = info.event.extendedProps;
            alert(
              `${info.event.title}\n\nOrt: ${props.ort}\nUhrzeit: ${props.uhrzeit}\nAdresse: ${props.adresse}\n\n${props.kommentar || ''}`
            );
          }
        });

        calendar.render();
      }
    });
  });
</script>

<!-- Hamburger Script -->
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const hamburger = document.querySelector('.hamburger');
    const mainNav = document.querySelector('.main-nav');

    hamburger.addEventListener('click', () => {
      const isOpen = mainNav.classList.toggle('open');
      hamburger.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
      hamburger.classList.toggle('active', isOpen);
    });
  });
</script>

</body>
</html>
